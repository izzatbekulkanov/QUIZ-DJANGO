{% extends 'dashboard/index.html' %}
{% load static %}

{% block style %}
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
    .content {
        max-width: 1200px;
        margin: 0 auto;
        padding: 1.5rem;
    }
    .card-img-top, .card-img-placeholder {
        height: 180px;
        object-fit: cover;
        border-top-left-radius: 0.5rem;
        border-top-right-radius: 0.5rem;
    }
    .card-img-placeholder {
        background-color: #e9ecef;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #6c757d;
        font-size: 1rem;
    }
    .no-data-container {
        text-align: center;
        margin: 2rem 0;
    }
    .no-data-img {
        max-width: 300px;
        width: 100%;
        height: auto;
        margin-bottom: 1rem;
    }
    .no-data-text {
        color: #6c757d;
        font-size: 1rem;
    }
</style>
{% endblock style %}

{% block content %}
<main id="main-container">
    <!-- Breadcrumb -->
    <nav aria-label="breadcrumb" class="bg-light border-bottom mb-4">
        <div class="content py-2">
            <ol class="breadcrumb mb-0">
                <li class="breadcrumb-item">
                    <a href="{% url 'dashboard' %}"><i class="fa fa-home"></i> Bosh sahifa</a>
                </li>
                <li class="breadcrumb-item active" aria-current="page">Testlar</li>
            </ol>
        </div>
    </nav>
    <!-- END Breadcrumb -->
    <div class="content">
        <h2 class="mb-4">Kategoriyalar</h2>
        <div class="row row-cols-1 row-cols-md-3 g-4">
            {% for category in categories %}
                <div class="col">
                    <div class="card h-100 shadow-sm">
                        {% if category.image %}
                            <img src="{{ category.image.url }}" class="card-img-top" alt="{{ category.name }}">
                        {% else %}
                            <div class="card-img-placeholder">
                                <span>Rasm mavjud emas</span>
                            </div>
                        {% endif %}
                        <div class="card-body">
                            <h5 class="card-title">{{ category.name }}</h5>
                            <p class="card-text text-muted">
                                {{ category.description|default:"Tavsif mavjud emas" }}
                            </p>
                        </div>
                        <div class="card-footer text-end bg-light border-top-0">
                            <a href="{% url 'category-assignments' category.id %}" class="btn btn-primary btn-sm">Ko'rish</a>
                        </div>
                    </div>
                </div>
            {% empty %}
                <div class="no-data-container">
                    <img src="{% static 'img/no-data.webp' %}" alt="No Data" class="no-data-img">
                    <p class="no-data-text">Hozircha kategoriya mavjud emas</p>
                </div>
            {% endfor %}
        </div>
    </div>
</main>
{% endblock content %}

{% block script %}
<script>
    document.querySelectorAll('.btn-primary').forEach(btn => {
        btn.addEventListener('click', function() {
            this.classList.add('btn-clicked');
            setTimeout(() => {
                this.classList.remove('btn-clicked');
            }, 100);
        });
    });
</script>
{% endblock script %}